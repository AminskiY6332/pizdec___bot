# –°—Ç–∞—Ç—É—Å –≤–Ω–µ–¥—Ä–µ–Ω–∏—è Smart Messaging

## ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ–Ω—é:
- ‚úÖ `handle_photo_generate_menu_callback` - –º–µ–Ω—é —Ñ–æ—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚úÖ `handle_video_generate_menu_callback` - –º–µ–Ω—é –≤–∏–¥–µ–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏  
- ‚úÖ `handle_photo_to_photo_callback` - —Ñ–æ—Ç–æ –ø–æ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—É
- ‚úÖ `handle_user_profile_callback` - –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
- ‚úÖ `handle_my_avatars_callback` - –º–æ–∏ –∞–≤–∞—Ç–∞—Ä—ã
- ‚úÖ `handle_proceed_to_payment_callback` - –ø–µ—Ä–µ—Ö–æ–¥ –∫ –æ–ø–ª–∞—Ç–µ
- ‚úÖ `handle_back_to_menu_callback` - **–≤–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é**
- ‚úÖ `handle_referrals_menu_callback` - **–º–µ–Ω—é —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤**
- ‚úÖ `handle_support_callback` - **–ø–æ–¥–¥–µ—Ä–∂–∫–∞**
- ‚úÖ `handle_faq_callback` - **—á–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã**
- ‚úÖ `handle_faq_topic_callback` - **—Ç–µ–º—ã FAQ**
- ‚úÖ `handle_user_guide_callback` - **—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
- ‚úÖ `handle_subscribe_callback` - **–º–µ–Ω—é –ø–æ–∫—É–ø–∫–∏ –ø–∞–∫–µ—Ç–æ–≤**
- ‚úÖ `handle_payment_callback` - **–æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Ç–∞—Ä–∏—Ñ–∞**
- ‚úÖ `handle_check_training_callback` - **—Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∞–≤–∞—Ç–∞—Ä–æ–≤**
- ‚úÖ `start_photo_transform` - **–¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"**

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã:
- ‚úÖ `handlers/user/onboarding.py`
- ‚úÖ `handlers/user/messages.py`
- ‚úÖ `handlers/admin/commands.py`
- ‚úÖ `handlers/user/photo_transform.py`

## üîÑ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:
- **üì∏ –§–æ—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è** 
- **üé¨ –í–∏–¥–µ–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è**
- **üé≠ –§–æ—Ç–æ –ü—Ä–µ–æ–±—Ä–∞–∂–µ–Ω–∏–µ**
- **üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç**
- **üë• –ú–æ–∏ –∞–≤–∞—Ç–∞—Ä—ã**
- **üí≥ –ö—É–ø–∏—Ç—å –ø–∞–∫–µ—Ç**
- **üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é** (–∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥")
- **üë• –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–∑–µ–π**
- **üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞**
- **‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã** (–∏ –≤—Å–µ –ø–æ–¥—Ä–∞–∑–¥–µ–ª—ã)
- **üìñ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
- **üíé –ö—É–ø–∏—Ç—å –ø–∞–∫–µ—Ç** (–º–µ–Ω—é —Ç–∞—Ä–∏—Ñ–æ–≤ –∏ –æ–ø–ª–∞—Ç–∞)
- **üìã –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∞–≤–∞—Ç–∞—Ä–æ–≤** (–∏–∑ –º–µ–Ω—é "–ú–æ–∏ –∞–≤–∞—Ç–∞—Ä—ã")

–ë—É–¥—É—Ç **—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö!

‚úÖ **–í –º–µ–Ω—é –§–æ—Ç–æ –ü—Ä–µ–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"**

## üÜï –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è: `delete_message_and_send_new`

–°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π, —Ç—Ä–µ–±—É—é—â–∏—Ö –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è:
- ‚úÖ **–°–º–µ–Ω–∞ email** - —Ç–µ–ø–µ—Ä—å —É–¥–∞–ª—è–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –º–µ–Ω—é –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- ‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞** - —É–¥–∞–ª—è–µ—Ç –º–µ–Ω—é –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è "—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö" –¥–µ–π—Å—Ç–≤–∏–π

### üéØ –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:
- **–û–±—ã—á–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è** (–º–µ–Ω—é ‚Üí –º–µ–Ω—é) = `smart_message_send` (—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ)
- **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è** (–º–µ–Ω—é ‚Üí –≤–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö) = `delete_message_and_send_new` (—É–¥–∞–ª—è–µ—Ç + –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ)

## üéØ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
2. –ù–∞–∂–∏–º–∞–π—Ç–µ –Ω–∞ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é
3. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ **—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è**, –∞ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

## ‚è≥ –ß—Ç–æ –µ—â–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

- –û–±–Ω–æ–≤–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ (—Å—Ç–∏–ª–∏, –∞—Å–ø–µ–∫—Ç—ã, etc.)
- –î–æ–±–∞–≤–∏—Ç—å smart_message_send –≤ –¥—Ä—É–≥–∏–µ —Ñ–∞–π–ª—ã
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å edge cases

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!